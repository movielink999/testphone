<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title>Developer Mode Blocker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f0f0f0;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            touch-action: manipulation; /* Enable pinch zoom on mobile */
        }
        .container {
            text-align: center;
            background: white;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        h1 {
            color: #333;
        }
        p {
            color: #666;
        }
        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fff;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            z-index: 9999;
            border-radius: 8px;
        }
        .popup h2 {
            color: #d9534f;
        }
        .popup button {
            background: #f44336;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Developer Mode Blocker</h1>
        <p>This page blocks access to developer tools. Try opening DevTools or resizing the window.</p>
        <div id="statusIndicator" style="display: inline-block; padding: 10px 20px; border-radius: 50px; margin: 20px 0; font-weight: bold; background: rgba(46, 204, 113, 0.2); border: 2px solid #2ecc71;">
            System Status: Normal
        </div>
        <p id="deviceInfo">Device: Desktop</p>
    </div>

    <div class="popup" id="blockPopup">
        <h2>Access Blocked!</h2>
        <p>Developer tools or unauthorized actions detected. This is not allowed.</p>
        <button onclick="closePopup()">Close</button>
    </div>

    <script>
        // Professional Developer Mode Blocker Class
        class DevToolsBlocker {
            constructor(redirectUrl = 'https://example.com', threshold = 160) {
                this.devToolsOpen = false;
                this.redirectUrl = redirectUrl;
                this.threshold = threshold;
                this.popupElement = document.getElementById('blockPopup');
                this.statusElement = document.getElementById('statusIndicator');
                this.deviceElement = document.getElementById('deviceInfo');
                this.isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                this.visualViewport = window.visualViewport;
                this.initialWidth = this.visualViewport ? this.visualViewport.width : window.innerWidth;
                this.initialHeight = this.visualViewport ? this.visualViewport.height : window.innerHeight;

                // Assertions for pro-level code
                console.assert(this.initialWidth > 0, 'Initial width must be positive');
                console.assert(this.initialHeight > 0, 'Initial height must be positive');
                console.assert(typeof this.redirectUrl === 'string', 'Redirect URL must be a string');
                console.assert(this.threshold > 0, 'Threshold must be positive');

                this.updateDeviceInfo();
                this.updateStatus('Normal');
                console.log('DevToolsBlocker initialized:', { isMobile: this.isMobile, initialWidth: this.initialWidth, initialHeight: this.initialHeight });

                this.init();
            }

            init() {
                this.bindEvents();
                this.startMonitoring();
            }

            bindEvents() {
                // Block DevTools shortcuts
                document.addEventListener('keydown', (e) => this.handleKeyDown(e));

                // Block right-click
                document.addEventListener('contextmenu', (e) => this.handleContextMenu(e));

                // Detect window resize
                window.addEventListener('resize', () => this.handleResize());

                // Detect visual viewport resize if available (better for mobile)
                if (this.visualViewport) {
                    this.visualViewport.addEventListener('resize', () => this.handleVisualViewportResize());
                }

                // Detect orientation change
                window.addEventListener('orientationchange', () => this.handleOrientationChange());

                // Visibility change
                document.addEventListener('visibilitychange', () => this.handleVisibilityChange());
            }

            startMonitoring() {
                setInterval(() => this.checkDevTools(), 500);
            }

            handleKeyDown(e) {
                const isBlockedKey = e.key === 'F12' ||
                    (e.ctrlKey && e.shiftKey && ['I', 'J', 'C'].includes(e.key.toUpperCase())) ||
                    (e.ctrlKey && e.key.toUpperCase() === 'U');

                if (isBlockedKey) {
                    e.preventDefault();
                    this.showPopup();
                }
            }

            handleContextMenu(e) {
                e.preventDefault();
                this.showPopup();
            }

            handleResize() {
                const widthChange = Math.abs(window.innerWidth - this.initialWidth);
                const heightChange = Math.abs(window.innerHeight - this.initialHeight);
                console.log('Window resize detected:', { widthChange, heightChange, isMobile: this.isMobile });

                if (this.isMobile) {
                    // On mobile, only redirect if significant change (e.g., orientation or manual resize)
                    // Use higher threshold to avoid triggering on address bar hide/show
                    if (widthChange > 200 || heightChange > 200) {
                        this.redirect();
                    }
                } else {
                    // On desktop, redirect on any change
                    if (window.innerWidth !== this.initialWidth || window.innerHeight !== this.initialHeight) {
                        this.redirect();
                    }
                }
            }

            handleVisualViewportResize() {
                if (this.visualViewport) {
                    const widthChange = Math.abs(this.visualViewport.width - this.initialWidth);
                    const heightChange = Math.abs(this.visualViewport.height - this.initialHeight);

                    // Only redirect on significant visual viewport changes
                    if (widthChange > 200 || heightChange > 200) {
                        this.redirect();
                    }
                }
            }

            handleOrientationChange() {
                this.redirect();
            }

            handleVisibilityChange() {
                if (!document.hidden) {
                    this.checkDevToolsOnFocus();
                }
            }

            checkDevTools() {
                try {
                    const widthDiff = window.outerWidth - window.innerWidth;
                    const heightDiff = window.outerHeight - window.innerHeight;

                    if ((widthDiff > this.threshold || heightDiff > this.threshold) && !this.devToolsOpen) {
                        this.devToolsOpen = true;
                        this.redirect();
                    } else if (widthDiff <= this.threshold && heightDiff <= this.threshold && this.devToolsOpen) {
                        this.devToolsOpen = false;
                    }
                } catch (error) {
                    console.error('Error in DevTools check:', error);
                }
            }

            checkDevToolsOnFocus() {
                try {
                    const widthDiff = window.outerWidth - window.innerWidth;
                    const heightDiff = window.outerHeight - window.innerHeight;
                    if (widthDiff > this.threshold || heightDiff > this.threshold) {
                        this.redirect();
                    }
                } catch (error) {
                    console.error('Error in visibility check:', error);
                }
            }

            showPopup() {
                console.log('Showing popup for blocked action');
                this.updateStatus('Action Blocked', true);
                if (this.popupElement) {
                    this.popupElement.style.display = 'block';
                }
            }

            closePopup() {
                if (this.popupElement) {
                    this.popupElement.style.display = 'none';
                }
            }

            updateStatus(message, isWarning = false) {
                if (this.statusElement) {
                    this.statusElement.textContent = `System Status: ${message}`;
                    if (isWarning) {
                        this.statusElement.style.background = 'rgba(231, 76, 60, 0.2)';
                        this.statusElement.style.borderColor = '#e74c3c';
                    } else {
                        this.statusElement.style.background = 'rgba(46, 204, 113, 0.2)';
                        this.statusElement.style.borderColor = '#2ecc71';
                    }
                }
            }

            updateDeviceInfo() {
                if (this.deviceElement) {
                    this.deviceElement.textContent = `Device: ${this.isMobile ? 'Mobile' : 'Desktop'}`;
                }
            }

            redirect() {
                console.log('Redirecting due to detected activity');
                try {
                    window.location.href = this.redirectUrl;
                } catch (error) {
                    console.error('Error redirecting:', error);
                }
            }
        }

        // Initialize the blocker
        const blocker = new DevToolsBlocker();

        // Expose closePopup for button
        window.closePopup = () => blocker.closePopup();
    </script>
</body>
</html>
